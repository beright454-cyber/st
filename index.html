<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Pyramid Reader - 100 Stories</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Fredoka:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --theme-color: #ff007f;
            --bg-color: #f0f8ff;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Fredoka', sans-serif;
            background-color: var(--bg-color);
            transition: background-color 0.5s ease;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* --- Animated Backgrounds --- */
        #bg-elements { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        
        .butterfly {
            position: absolute; font-size: 4rem;
            animation: flyAcross 12s linear infinite, flutter 0.4s alternate infinite ease-in-out;
            opacity: 0.7; filter: drop-shadow(0 0 10px #ff007f);
        }
        .butterfly:nth-child(2) { top: 20%; animation-duration: 15s; animation-delay: 2s; font-size: 3rem; }
        .butterfly:nth-child(3) { top: 60%; animation-duration: 10s; animation-delay: 5s; font-size: 5rem; }

        .car {
            position: absolute; font-size: 5rem; bottom: 10%;
            animation: driveAcross 8s linear infinite;
            opacity: 0.9; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
        }
        .car:nth-child(2) { bottom: 30%; animation-duration: 12s; animation-delay: 3s; font-size: 4rem; }

        @keyframes flyAcross { 0% { left: -10%; transform: translateY(0); } 100% { left: 110%; transform: translateY(-50px); } }
        @keyframes flutter { 0% { transform: scaleY(1) rotate(10deg); } 100% { transform: scaleY(0.5) rotate(-10deg); } }
        @keyframes driveAcross { 0% { left: -10%; } 100% { left: 110%; } }

        /* --- Top Bar Setup --- */
        .top-bar {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px; display: flex; justify-content: center; gap: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); backdrop-filter: blur(5px);
            position: sticky; top: 0; z-index: 100; flex-wrap: wrap;
        }

        .input-box {
            font-family: 'Fredoka', sans-serif; font-size: 1.2rem;
            padding: 8px 15px; border: 3px solid var(--theme-color);
            border-radius: 20px; outline: none; transition: 0.3s;
        }

        .select-box {
            font-family: 'Fredoka', sans-serif; font-size: 1.2rem;
            padding: 8px 15px; border: 3px solid var(--theme-color);
            border-radius: 20px; background: white; cursor: pointer;
        }

        /* --- Main App Container --- */
        .container { display: flex; justify-content: center; padding: 40px 20px; }

        .sheet {
            background: white; width: 100%; max-width: 900px;
            border-radius: 30px; padding: 40px;
            border: 8px solid var(--theme-color);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            transition: border-color 0.5s ease;
        }

        .header-greeting { text-align: center; font-size: 2rem; color: var(--theme-color); margin-top: 0; }

        .content-grid { display: flex; gap: 40px; align-items: center; justify-content: space-between; flex-wrap: wrap; }

        /* Pyramid Text Style */
        .pyramid-box {
            flex: 1; min-width: 300px;
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem; font-weight: bold;
            line-height: 1.4; color: #333;
        }
        .pyramid-line { margin-bottom: 5px; transition: color 0.3s; }
        .pyramid-line:hover { color: var(--theme-color); transform: scale(1.02); margin-left: 10px; cursor: pointer; }

        /* Image & Emoji Style */
        .image-box { flex: 1; text-align: center; min-width: 300px; display: flex; flex-direction: column; align-items: center; }
        
        .story-emoji {
            font-size: 6rem;
            margin-bottom: 15px;
            animation: bounce 2s infinite;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
        }

        .story-img {
            width: 100%; max-width: 380px; border-radius: 20px;
            border: 6px solid var(--theme-color);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); transition: 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        /* Controls */
        .controls { display: flex; justify-content: center; gap: 20px; margin-top: 40px; }
        .btn {
            font-family: 'Fredoka', sans-serif; font-size: 1.3rem;
            padding: 12px 30px; border: none; border-radius: 50px;
            color: white; cursor: pointer; font-weight: bold;
            background: var(--theme-color); box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: 0.3s;
        }
        .btn:hover { transform: translateY(-5px) scale(1.05); }
        .btn-speaker { background: #ff9f1c; font-size: 1.5rem; }

        /* Status */
        .story-counter { text-align: center; margin-top: 20px; font-size: 1.2rem; color: #777; font-weight: bold; }

        @media (max-width: 768px) {
            .content-grid { flex-direction: column-reverse; }
            .pyramid-box { font-size: 2rem; text-align: center; }
        }
    </style>
</head>
<body>

    <div id="bg-elements"></div>

    <div class="top-bar">
        <input type="text" id="studentName" class="input-box" placeholder="Child's Name" oninput="updateName()">
        <select id="genderSelect" class="select-box" onchange="updateTheme()">
            <option value="girl">üëß Baby Girl (Butterflies)</option>
            <option value="boy">üë¶ Baby Boy (Cars)</option>
        </select>
    </div>

    <div class="container">
        <div class="sheet">
            <h1 id="greeting" class="header-greeting">Let's Read!</h1>

            <div class="content-grid">
                <div id="pyramid-container" class="pyramid-box">
                    </div>
                <div class="image-box">
                    <div id="main-emoji" class="story-emoji"></div>
                    <img id="main-img" class="story-img" src="" alt="Story Visual">
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="nav(-1)">‚¨Ö Back</button>
                <button class="btn btn-speaker" onclick="speakAussie()">üîä Read to Me</button>
                <button class="btn" onclick="nav(1)">Next ‚û°</button>
            </div>
            
            <div class="story-counter">Story <span id="counterNum">1</span> of 100</div>
        </div>
    </div>

    <script>
        // --- 100 Categorized Stories WITH EMOJIS ---
        const stories = [
            // "The"
            { text: "The cat sat on the mat.", emoji: "üê±" }, { text: "The dog ran to the tree.", emoji: "üê∂" }, { text: "The bird flew in the sky.", emoji: "üê¶" }, { text: "The pig played in the mud.", emoji: "üê∑" }, { text: "The fish swam in the pond.", emoji: "üêü" },
            // "This"
            { text: "This red apple is very sweet.", emoji: "üçé" }, { text: "This big bus goes to school.", emoji: "üöå" }, { text: "This little bug is on grass.", emoji: "üêõ" }, { text: "This happy frog jumped very high.", emoji: "üê∏" }, { text: "This brown bear sleeps all day.", emoji: "üêª" },
            // "That"
            { text: "That tall tree has green leaves.", emoji: "üå≥" }, { text: "That fast car won the race.", emoji: "üöó" }, { text: "That small mouse hid in a hole.", emoji: "üê≠" }, { text: "That bright star shines at night.", emoji: "‚≠ê" }, { text: "That funny monkey eats a banana.", emoji: "üêí" },
            // "These"
            { text: "These cute puppies love to play.", emoji: "üêï" }, { text: "These pretty flowers smell so good.", emoji: "üå∏" }, { text: "These yellow ducks swim in water.", emoji: "ü¶Ü" }, { text: "These green turtles walk very slow.", emoji: "üê¢" }, { text: "These busy bees make sweet honey.", emoji: "üêù" },
            // "Those"
            { text: "Those big elephants walk in line.", emoji: "üêò" }, { text: "Those wild lions roar very loud.", emoji: "ü¶Å" }, { text: "Those colorful balloons fly so high.", emoji: "üéà" }, { text: "Those jumping kangaroos are very fast.", emoji: "ü¶ò" }, { text: "Those white clouds look like cotton.", emoji: "‚òÅÔ∏è" },
            // "My"
            { text: "My little kitten is very soft.", emoji: "üêà" }, { text: "My best friend likes to draw.", emoji: "üëß" }, { text: "My new shoes are bright blue.", emoji: "üëü" }, { text: "My toy robot can walk fast.", emoji: "ü§ñ" }, { text: "My teddy bear is very cuddly.", emoji: "üß∏" },
            // "Your"
            { text: "Your green kite flies up high.", emoji: "ü™Å" }, { text: "Your yellow bike is super fast.", emoji: "üö≤" }, { text: "Your warm coat is very fluffy.", emoji: "üß•" }, { text: "Your smart dog can catch balls.", emoji: "ü¶Æ" }, { text: "Your big house has many windows.", emoji: "üè†" },
            // "His"
            { text: "His pet snake is very long.", emoji: "üêç" }, { text: "His favorite book is about space.", emoji: "üìñ" }, { text: "His loud drum makes big sounds.", emoji: "ü•Å" }, { text: "His red wagon holds many toys.", emoji: "üõí" }, { text: "His magic trick is very cool.", emoji: "üé©" },
            // "Her"
            { text: "Her pink dress has pretty bows.", emoji: "üëó" }, { text: "Her pet rabbit loves eating carrots.", emoji: "üêá" }, { text: "Her painted picture is so beautiful.", emoji: "üñºÔ∏è" }, { text: "Her dancing shoes are very shiny.", emoji: "ü©∞" }, { text: "Her sweet song makes me happy.", emoji: "üéµ" },
            // "Our"
            { text: "Our family goes to the beach.", emoji: "üèñÔ∏è" }, { text: "Our school trip was very fun.", emoji: "üöå" }, { text: "Our garden has many red tomatoes.", emoji: "üçÖ" }, { text: "Our pet parrot talks all day.", emoji: "ü¶ú" }, { text: "Our snowman has a carrot nose.", emoji: "‚õÑ" },
            // "A"
            { text: "A baby penguin slides on ice.", emoji: "üêß" }, { text: "A green caterpillar eats a leaf.", emoji: "üêõ" }, { text: "A brave knight rides a horse.", emoji: "üêé" }, { text: "A hungry shark swims looking for food.", emoji: "ü¶à" }, { text: "A pirate ship sails the ocean.", emoji: "‚õµ" },
            // "An"
            { text: "An orange pumpkin sits on the porch.", emoji: "üéÉ" }, { text: "An old owl hoots in the dark.", emoji: "ü¶â" }, { text: "An angry alien landed a spaceship.", emoji: "üëΩ" }, { text: "An ice cream cone is yummy.", emoji: "üç¶" }, { text: "An eagle flies over the mountain.", emoji: "ü¶Ö" },
            // "One"
            { text: "One little ladybug landed on me.", emoji: "üêû" }, { text: "One giant dinosaur gave a roar.", emoji: "ü¶ñ" }, { text: "One magical unicorn has a horn.", emoji: "ü¶Ñ" }, { text: "One police car turns on lights.", emoji: "üöì" }, { text: "One fire truck sprays cool water.", emoji: "üöí" },
            // "Two"
            { text: "Two baby goats jump and play.", emoji: "üêê" }, { text: "Two brown monkeys swing on vines.", emoji: "üêí" }, { text: "Two silver dolphins jump up high.", emoji: "üê¨" }, { text: "Two black bats sleep upside down.", emoji: "ü¶á" }, { text: "Two friendly ghosts say boo softly.", emoji: "üëª" },
            // "Three"
            { text: "Three little pigs built strong houses.", emoji: "üêñ" }, { text: "Three blind mice run very fast.", emoji: "üêÅ" }, { text: "Three spotted cows eat green grass.", emoji: "üêÑ" }, { text: "Three happy children play tag outside.", emoji: "üßí" }, { text: "Three green frogs sit on logs.", emoji: "üê∏" },
            // "Some"
            { text: "Some red apples fell on the ground.", emoji: "üçé" }, { text: "Some busy ants carry heavy crumbs.", emoji: "üêú" }, { text: "Some wild horses run in fields.", emoji: "üêé" }, { text: "Some quiet deer hide in trees.", emoji: "ü¶å" }, { text: "Some bright stars fall from space.", emoji: "‚ú®" },
            // "Many"
            { text: "Many colorful fish swim around coral.", emoji: "üê†" }, { text: "Many loud birds sing at sunrise.", emoji: "üê§" }, { text: "Many green leaves fall in autumn.", emoji: "üçÇ" }, { text: "Many happy people watch the parade.", emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" }, { text: "Many big boats sail the river.", emoji: "üõ≥Ô∏è" },
            // "All"
            { text: "All the children love eating pizza.", emoji: "üçï" }, { text: "All the kittens sleep in a basket.", emoji: "üòª" }, { text: "All the puppies wag their tails.", emoji: "üê∂" }, { text: "All the stars twinkle at night.", emoji: "üåü" }, { text: "All the snow melted in the sun.", emoji: "‚ùÑÔ∏è" },
            // "No"
            { text: "No wild bears came to the camp.", emoji: "üêª" }, { text: "No green monsters hide under the bed.", emoji: "üëπ" }, { text: "No dark clouds are in the sky.", emoji: "üå©Ô∏è" }, { text: "No little mice are in the house.", emoji: "üêÅ" }, { text: "No hungry wolves howl tonight.", emoji: "üê∫" },
            // "Every"
            { text: "Every good boy loves to read.", emoji: "üë¶" }, { text: "Every smart girl does her homework.", emoji: "üëß" }, { text: "Every little bird builds a nest.", emoji: "ü™π" }, { text: "Every big tree needs water to grow.", emoji: "üå≤" }, { text: "Every happy baby loves to smile.", emoji: "üë∂" }
        ];

        const colors = [
            "#FF007F", "#00F2FF", "#79FF00", "#FF9F1C", "#9C27B0", "#E91E63", "#00BCD4", 
            "#4CAF50", "#FF5722", "#3F51B5", "#F44336", "#8BC34A", "#FFC107", "#673AB7", 
            "#009688", "#FF4081", "#CDDC39", "#2196F3", "#FF9800", "#607D8B"
        ];

        let currentIdx = 0;
        let auVoice = null;

        function loadVoices() {
            const voices = window.speechSynthesis.getVoices();
            auVoice = voices.find(v => v.lang === 'en-AU' || v.lang === 'en_AU' || v.name.includes('Australian'));
        }
        window.speechSynthesis.onvoiceschanged = loadVoices;

        function render() {
            const data = stories[currentIdx];
            const sentence = data.text;
            const words = sentence.split(" ");
            const themeColor = colors[currentIdx % colors.length];

            // 1. Update Colors
            document.documentElement.style.setProperty('--theme-color', themeColor);
            document.body.style.backgroundColor = themeColor + "20"; 

            // 2. Build Pyramid Text
            let pyramidHtml = "";
            let currentString = "";
            for(let i = 0; i < words.length; i++) {
                currentString += (i === 0 ? "" : " ") + words[i];
                pyramidHtml += `<div class="pyramid-line">${currentString}</div>`;
            }
            document.getElementById('pyramid-container').innerHTML = pyramidHtml;

            // 3. Update EMOJI
            document.getElementById('main-emoji').innerText = data.emoji;

            // 4. Update Image (Fallback visual)
            const cleanPrompt = sentence.replace(/[^a-zA-Z0-9 ]/g, ""); 
            const imgUrl = `https://image.pollinations.ai/prompt/cute%203d%20pixar%20cartoon%20${encodeURIComponent(cleanPrompt)}?width=400&height=400&nologo=true&seed=${currentIdx}`;
            document.getElementById('main-img').src = imgUrl;

            // 5. Update Counters
            document.getElementById('counterNum').innerText = currentIdx + 1;
        }

        function nav(dir) {
            currentIdx += dir;
            if(currentIdx < 0) currentIdx = 99;
            if(currentIdx > 99) currentIdx = 0;
            render();
        }

        function speakAussie() {
            const sentence = stories[currentIdx].text;
            const msg = new SpeechSynthesisUtterance(sentence);
            msg.rate = 0.8; 
            msg.pitch = 1.1; 
            
            if(auVoice) {
                msg.voice = auVoice;
            }
            window.speechSynthesis.speak(msg);
        }

        function updateName() {
            const name = document.getElementById('studentName').value;
            const greet = document.getElementById('greeting');
            if(name) {
                greet.innerText = `Awesome Reading, ${name}!`;
            } else {
                greet.innerText = `Let's Read!`;
            }
        }

        function updateTheme() {
            const gender = document.getElementById('genderSelect').value;
            const bgContainer = document.getElementById('bg-elements');
            bgContainer.innerHTML = ''; 

            if(gender === 'girl') {
                bgContainer.innerHTML = `
                    <div class="butterfly">ü¶ã</div>
                    <div class="butterfly">ü¶ã</div>
                    <div class="butterfly">ü¶ã</div>
                `;
            } else {
                bgContainer.innerHTML = `
                    <div class="car">üèéÔ∏è</div>
                    <div class="car">üöì</div>
                `;
            }
        }

        loadVoices(); 
        updateTheme(); 
        render(); 

    </script>
</body>
</html>